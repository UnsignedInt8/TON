# 附录： TON 代币（即 Gram）

TON 区块链的主要加密货币（特别是其主链和基本工作链）是 TON Coin，也称为 Gram（GRM）。 它用于验证人所需的存款、交易费、燃料费（即智能合约处理费）和持久存储。

## A.1 单位划分和术语

Gram 被细分为十亿（10^9）个单位，称为 nanograms，ngram 或 nanos。 所有转账和账户余额均表示为 nanos 的非负整数倍。 其他单位包括：

1. nanos，ngram 或 ngrams 是最小的单位，等于 10<sup>-9</sup> Gram.
2. 1 micro(microgram) = 10<sup>3</sup> nanos.
3. 1 milli = 10<sup>6</sup> nanos，或 10<sup>-3</sup> Gram.
4. 1 Gram = 10<sup>9</sup> nanos.
5. 1 kilogram(kGram) = 10<sup>3</sup> Grams.
6. 1 megagram(MGram) = 10<sup>6</sup> Grams = 10<sup>15</sup> nanos.
7. 1 gigagram(GGram) = 10<sup>9</sup> Grams = 10<sup>18</sup> nanos.

之后不需要更大的单位了，因为 Grams 的初始供应量将限制在 50 亿（5·10<sup>9</sup>）Grams（即，5 Gigagrams）。

## A.2 用更小的单位表示燃料价格

如果需要更小的单位，那么可以使用 "specks" = 2<sup>-16</sup> nanograms。 例如，燃料价格可以用 specks 表示。 但是，实际支付的费用，即燃料价格和消耗总燃料的乘积，将总是 2<sup>16</sup> specks 倍的向下取整，并表示为 nanos。

## A.3 初始供应量，新块奖励和通货膨胀

Grams 的初始供应量限制在 5 Gigagrams（即 50 亿 Grams，或 5·10<sup>18</sup> nanos）。

因为挖掘新主链块和分片块的验证人的奖励累积，所以货币供应量将非常缓慢地增加。如果验证人永不脱机地努力签署所有区块，并且永远不签署无效区块，则每年这些奖励将相当于验证人股权的大约 20％（未来可以调整确切数量）。 通过这种方式，验证人将有足够的利润来投资于处理不断增长的用户交易量所需的更好和更快的硬件。

我们预计，在任何时刻，验证人的股权最多占有 10％ 的 Grams 总供应量。 所以这将导致每年 2％ 的通货膨胀率，因此，35 年内 Grams 的总供应量会增加一倍（达到10 Gigagrams）。 从本质上讲，这种通货膨胀代表了社区所有成员向验证人员支付的费用，用于保持系统正常运行。

另一方面，如果验证人行为不端，作为惩罚，其部分或全部股权将被“销毁”，从而减少 Grams 的总供应量，这就会导致通货紧缩。 一小部分罚金可以重新分配给揭发行为不端验证人的“渔夫”或验证人。

## A.4 Gram 的原始价格

第一批销售的 Gram 价格约为 0.1 美元（USD）。随后 TON 储备出售的 Gram（由TON基金会控制）的价格将比前一批高十亿分之一。这样，待投入流通的第 n 批 Grams 的价格大约是：

> (式26) p(n) ≈ 0.1 · (1 + 10<sup>−9</sup>)<sup>n</sup> USD

或（因为市场汇率快速变化）大致相当于其他（加密）货币的波动。

## A.4.1 指数级价格的加密货币

我们说 Gram 是一个指数级价格的加密货币，这意味着要进入流通的第 n 批 Gram 的价格大约是公式:

> (式27) p(n) = p<sub>0</sub> · e<sup>αn</sup>

这里， p<sub>0</sub> = 0.1 USD，α = 10<sup>−9</sup>。

更准确地说，一旦新币(dn)投入流通，新币的价值就是 p(n)dn 美元。（这里n不一定是整数。）

另一个重要参数是流通中的总币数 n，以及 N ≥ n（即可存在的总币数）。对于 Gram，N = 5·10<sup>9</sup>。

## A.4.2 前 n 批次代币的总价

要进入流通的前 n 批代币的总价格 ![T(n)](https://latex.codecogs.com/svg.latex?T(n)&space;=\int_{0}^{n}p(n)dn&space;\approx&space;p(0)&space;&plus;&space;p(1)&space;&plus;&space;...&space;&plus;&space;p(n-1)) 可以通过以下公式计算：

> (式28) T(n) = p<sub>0</sub> · α<sup>−1</sup>(e<sup>αn</sup> − 1)

## A.4.3 后续 Δn 批次代币的总价

在先前 n 个批次之后投入流通的 Δn 个批次代币的总价格 T(n + Δn) - T(n) 可以通过以下方式计算：

> (式29) T(n + ∆n) − T(n) = p<sub>0</sub> ·α<sup>−1</sup>(e<sup>α(n+∆n)</sup> −e<sup>αn</sup>) = p(n)·α<sup>−1</sup>(e<sup>α∆n</sup> −1)

## A.4.4 用总价值 T 购买下一批次代币

假设已有 n 个币投入流通，并且想要花费 T（美元）购买新币。 通过将 T(n+Δn) - T(n) = T 置于（式29）中，可以计得到新币的数量 Δn：

> (式30) ![Δn](https://latex.codecogs.com/svg.latex?\Delta&space;n&space;=&space;\alpha^{-1}&space;log\left&space;(1&plus;&space;\frac{T\cdot&space;\alpha&space;}{p(n)}&space;\right&space;))

当然，如果 T ≪ p(n)α<sup>-1</sup>，那么 ∆n ≈ T/p(n)。

## A.4.5 Grams 的市场价格

当然，一旦有 n Grams 进入流通，并且自由市场价格低于 p(n) := 0.1·(1 + 10<sup>-9</sup>)<sup>n</sup>，就没有人会从 TON 储备中购买新的 Grams，因为他们会选择在自由市场上购买 Grams，从而不会增加 Grams 的总流通量。 另一方面，这就要求 Gram 的市场价格不会过高于 p(n)，否则从 TON 储备购买新的 Grams 就是合算的。 这也意味着 Grams 的市场价格不会突然暴涨（或暴跌）; 所以这个机制很重要，因为股权（验证人存款）会被冻结至少一个月，所以燃料价格也不会变得太快。因此，该系统的整体经济稳定性就需要一些机制来防止 Gram 的汇率变化不会太大。

## A.4.6 回购 Grams

当总共有 n Grams 在市面流通时（即没有保留在由 TON 储备控制的特殊账户），如果 Gram 的市场价格低于 0.5·p(n)，TON 储备就会保留购买权，并回购一些 Grams 来降低流通中的 Grams 总量。 这是防止 Grams 暴跌的必要手段。

## A.4.7 在高位出售新的 Grams

根据价格公式（式26），TON 储备只能出售 Grams 总供应量的一半（即 2.5·10<sup>9</sup> Grams）。它可以保留不出售任何剩余的 Grams，或以高于 p(n) 的价格出售它们，但绝不以较低的价格出售（考虑到快速变化市场价格）。 这里的理由是，一旦有一半的 Grams 都被出售，那么 Grams 总市值将会足够高，从而使庄家炒作的难度急剧变大。

## A.5 使用未分配的 Grams

TON 储备将使用大部分“未分配” Grams（约 5·10<sup>9</sup> - n Grams），这些代币会被存放在 TON 储备的特别账户中，以及仅作为早期验证人股权的账户中（因为 TON 基金会本身可能必须在 TON 区块链的第一个部署阶段作为大多数的验证人，并且由 TON 基金会决定在主链中投票赞成或反对有关“可配置参数”和其它协议变更的提案）。这也意味着在 TON 区块链的第一个部署阶段，如果涉及到调整大量参数，或者需要硬软分叉，那么由 TON 基金会将获得大多数选票会对生态的发展起到促进作用。后来，TON 基金会只能控制不到一半的 Grams 时，该系统将变得更加民主。也希望到那时它会变得更加成熟，而不需要过于频繁地调整参数。

## A.5.1 一些未分配的 Grams 将提供给开发人员

在 TON 区块链的部署期间，将预先定义相对较小数量“未分配”的 Grams（例如，200 megagrams，相当于总供应量的 4%）转移到 TON 基金会，然后至少两年内，将一些“奖励”从这个帐户支付给开源 TON 软件的开发者。

## A.5.2 TON 基金会需要 Grams 用于运营目的

回想一下，从 TON 储备中出售 Grams 而获得的法定货币和加密货币将转交给 TON 基金会，并将其用于开发和部署 TON 项目。例如，TON 基金会 可以部署原始的验证人集，以及初始的 TON 存储和 TON Proxy 节点集。

虽然这对于项目的快速启动是必要的，但我们的最终目标是使项目尽可能去中心化。 为此，TON 基金会可能需要鼓励大众部署第三方验证人、TON 存储 和 TON Proxy 节点 - 例如，通过给他们支付费用来存储 TON 区块链的旧块或代理所选服务子集的网络流量。 此类付款将使用 Grams 支付; 因此，TON 基金会需要大量的 Grams 用于运营目的。

## A.5.3 从 TON 储备中获取预先安排的金额

TON 基金会将 TON 储备的一小部分转移到其账户 - 比如，在 Grams 最初销售结束后所有代币的 10%（即，500 Megagrams）用于 A.5.1， A.5.2 所述的目的。

在资金转移给 TON 基金会和 TON 开发者之后，Gram 的 TON 储备价格 p(n) 将立即上升一定数量，这是我们预先知道的。 例如，如果向 TON 基金会转移了 10% 代币，并且为了鼓励开发者，又转移了 4％ 的代币，那么流通中的代币总数 n 将立即增加 Δn = 7·10<sup>8</sup>，再用 e<sup>αΔn</sup>=e<sup>0.7</sup>≈2 乘以 Gram 的价格，即加倍。

如上文 A.5 中所述，剩余的“未分配” Grams 将由 TON 储备使用。如果此后 TON 基金会需要更多的 Grams，它将简单地将一些在代币销售期间获得的资金转换为 Grams，无论是在自由市场上还是从 TON 储备购买Grams。为了防止过度集中化，TON 基金会永远不会在其账户上拥有超过 10％ 的 Grams（即，500 Megagrams）。

## A.6 批量销售 Grams

当有很多人同时想从 TON 储备中购买大量的 Grams 时，不立即处理他们的订单是有意义的，因为这会导致代币的分发非常依赖于特定订单的时间和他们的处理顺序。

相反，可以在某个预定义的时间段（例如，一天或一个月）内收集购买 Grams 的订单，然后一次性全部处理。如果 k 个订单中的第 i 个订单具有价值 T<sub>i</sub> 美元，则根据（式30），用总金额 *T = T<sub>1</sub> + T<sub>2</sub> + ... + T<sub>k</sub>* 购买 Δn 个新币，并且第 i 个买家的订单分配到 *Δn·Ti / T* 个新代币。通过这种方式，所有买家都以相同的平均价格 T/Δn USD 得到他们的 Grams。

之后，就开始新一轮的 Grams 代币发售。

当 Gram 购买订单的总价值变得足够低时，根据（式30），该“批量销售”系统就会被 TON 储备直接销售 Grams 代替。

在收集 TON 项目投资的初始阶段，“批量销售”机制可能会被广泛使用。